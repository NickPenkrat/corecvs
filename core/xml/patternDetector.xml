<poco version="5.0">
  <include name="parameters.xml"/>

  <enum name="Checkerboard Detection Algorithm">
    <item name="Homebrew Detector" id="0" />
    <item name="OpenCV Detector"   id="1" />
  </enum>

  <class name="Checkerboard Detection Parameters">
    <field type="bool"         name="Estimate undistorted from distorted" defaultValue="true"/>
    <field type="bool"         name="Use Undistortion"      defaultValue="true"/>

    <field type="Checkerboard Detection Algorithm" name="Algorithm" defaultValue="0" />


    <field type="ImageChannel" name="Channel"            defaultValue="3"   />
    <field type="double"       name="Cell Size Hor"      defaultValue="50"   suffix="mm" />
    <field type="double"       name="Cell Size Vert"     defaultValue="50"   suffix="mm" />

    <field type="bool"         name="Clean existing"     defaultValue="true" />

    <field type="int"          name="Precise Diameter"   defaultValue="50"      min="0"   max="999999"  />
    <field type="int"          name="Iteration count"    defaultValue="50"      min="1"   max="999999"  />
    <field type="double"       name="Min accuracy"       defaultValue="0.01"    min="0.0" max="999999" suffix="px" decimals="4"/>


    <field type="bool"         name="Partial Board"       defaultValue="true"/>
    <field type="bool"         name="Fast board Speedup"  defaultValue="true"/>
    <field type="bool"         name="Draw SGFs on boards" defaultValue="true"/>
    <field type="bool"         name="Skip undistorted with no distorted board" defaultValue="false"/>

  </class>


  <class name="Chess Board Corner Detector Params Base">
     <field type="double" name="gradientCrossWidth"  defaultValue="3.0" comment="Width of cross for corner gradient-score" />

     <!-- Insert vectors here -->

     <field type="double" name="sectorSizeDeg"  suffix="deg" defaultValue="90"    comment="Sector size in deg" />
     <field type="int"    name="histogramBins"               defaultValue="50"    comment="Number of bins for computing edge direction histogram" min="0"   max="999999"  />

     <field type="double" name="minAngleDeg"  suffix="deg" defaultValue="30"      comment="Minimal angle between edges in deg" />
     <field type="int"    name="neighborhood"              defaultValue="25"      comment="Typical radius for estimating edge-related data and refinig corner positions" min="0"   max="999999"  />
     <field type="double" name="gradThreshold"             defaultValue="0.1"     comment="Gradient magnitude threshold" />

     <field type="double" name="orientationInlierThreshold" defaultValue="0.25" comment="Gradient orientation inlier threshold" />
     <field type="double" name="inlierDistanceThreshold"    defaultValue="5.0"  comment="Threshold for distance to edge" />
     <field type="double" name="updateThreshold"            defaultValue="4.0"  comment="Threshold for maximal corner-position update" />


     <field type="double" name="scoreThreshold"            defaultValue="0.0"   comment="Threshold for final score" />
     <field type="int"    name="nRounds"                   defaultValue="3"     comment="Number of orientation/position refinement rounds" min="0"   max="999999"  />


     <field type="double" name="meanshiftBandwidth"        defaultValue="1.0"   comment="Meanshift smoothing stdev" />
     <field type="int"    name="nmsLocality"               defaultValue="20"    comment=" // NMS locality threshold" min="0"   max="999999"  />

  </class>

  <class name="Chess Board Assembler Params Base">
    <field type="double" name="seedThreshold"        defaultValue="0.3"    comment="Threshold for seed grid non-regularity" />
    <field type="double" name="seedTgPenalty"        defaultValue="5.0"    comment="Factor for orthogonal error in seed estimation" />
    <field type="double" name="conservativity"       defaultValue="0.9"    comment="Factor of conservativity in next row prediction (should be lower to high-distorted boards)" />
    <field type="double" name="costThreshold"        defaultValue="-10.0"  comment=" Maximal cost for real board" />
    <field type="double" name="minSeedDistance"      defaultValue="15.0"   comment="Minimal seed distance" />
    <field type="int"    name="hypothesisDimensions" defaultValue="1"      comment="Hypothesis type: consider only hypothesis that fits specified number of dims" />


    <field type="int"    name="hypothesisDimFirst"   defaultValue="18" />
    <field type="int"    name="hypothesisDimSecond"  defaultValue="11" />
  </class>


  <class name="Bitcode Board Params Base">
    <field type="bool" name="vertical"    defaultValue="true" comment="Orientation" />

    <field type="int"  name="cellSize"    defaultValue="256"  comment="Chess cells size in pixels" />

    <field type="int"  name="blackColor"  defaultValue="0"    comment="shades of gray for black chesses" />
    <field type="int"  name="whiteColor"  defaultValue="255"  comment="shades of gray for white chesses" />

    <field type="int"  name="identSize"  defaultValue="1"    comment="white ident size around chessboard in chesses" />

    <field type="int"  name="boardHeight" defaultValue="4"    comment="size of the chessboard in chesses" />
    <field type="int"  name="boardWidth"  defaultValue="4"    comment="size of the chessboard in chesses" />

    <field type="int"  name="codeWidth"   defaultValue="4"    comment="width and height of the bitcode in chesses" />
    <field type="int"  name="codeHeight"  defaultValue="2"    comment="width and height of the bitcode in chesses" />

    <field type="int"  name="bitcodeIdentSize" defaultValue="1" comment="ident between chessboard and bitcode in chesses" />
  </class>

</poco>

