/**
 * \file main_test_morphologic.cpp
 * \brief This is the main file for the test morphologic 
 *
 * \date Aug 11, 2011
 * \author alexander
 *
 * \ingroup autotest  
 */

#include <stdint.h>
#include <iostream>
#include "global.h"
#include "g12Buffer.h"
#include "bmpLoader.h"
#include "morphological.h"

using namespace std;
using namespace corecvs;


uint16_t inputData[10*10] =
{
   0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
   0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
   0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
   0x0000, 0x0000, 0x0000, 0x0000, 0x0FFF, 0x0FFF, 0x0000, 0x0000, 0x0000, 0x0000,
   0x0000, 0x0000, 0x0000, 0x0FFF, 0x0FFF, 0x0FFF, 0x0FFF, 0x0000, 0x0000, 0x0000,

   0x0000, 0x0000, 0x0000, 0x0FFF, 0x0FFF, 0x0FFF, 0x0FFF, 0x0000, 0x0000, 0x0000,
   0x0000, 0x0000, 0x0000, 0x0000, 0x0FFF, 0x0FFF, 0x0000, 0x0000, 0x0000, 0x0000,
   0x0000, 0x0FFF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
   0x0FFF, 0x0FFF, 0x0FFF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
   0x0000, 0x0FFF, 0x0FFF, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000
};


uint16_t elementData[3*3] =
{
   0x0000, 0x0FFF, 0x0000,
   0x0FFF, 0x0FFF, 0x0FFF,
   0x0000, 0x0FFF, 0x0000
};


void testErodeDilate (void)
{
    G12Buffer *input   = new G12Buffer(10,10, inputData);
    G12Buffer *element = new G12Buffer(3,3, elementData);

    G12Buffer *erode  = Morphological::erode(input, element, 1, 1);
    BMPLoader().save("erode.bmp", erode);
    G12Buffer *dilate = Morphological::dilate(input, element, 1, 1);
    BMPLoader().save("dilate.bmp", dilate);

    delete erode;
    delete dilate;
    delete input;
    delete element;
}

int main (int /*argC*/, char ** /*argV*/)
{
    testErodeDilate();
    cout << "PASSED" << endl;
    return 0;
}
